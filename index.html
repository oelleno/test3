<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>회원 가입</title>
  <script src="./js/regist.js"></script>
  <link rel="stylesheet" href="./style.css">
  <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
  <script src="https://cdn.ckeditor.com/ckeditor5/34.0.0/classic/ckeditor.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    function sample6_execDaumPostcode() {
      new daum.Postcode({
        oncomplete: function (data) {
          var addr = data.userSelectedType === 'R' ? data.roadAddress : data.jibunAddress;
          document.getElementById("sample6_address").value = addr;
        }
      }).open();
    }

    function downloadAsImage() {
      const container = document.querySelector('.container');
      html2canvas(container).then(canvas => {
        const link = document.createElement('a');
        link.href = canvas.toDataURL('image/jpeg');
        link.download = '회원가입.jpg';
        link.click();
      });
    }

    function formatCurrency(input) {
      // 입력 값에서 숫자만 추출
      let value = input.value.replace(/[^\d]/g, "");

      // 숫자를 3자리 단위로 쉼표 추가
      value = new Intl.NumberFormat("ko-KR", {
        style: "currency",
        currency: "KRW",
      }).format(value);

      // ₩ 표시 제거 (placeholder가 이미 ₩를 보여주기 때문에 중복 방지)
      value = value.replace("₩", "").trim();

      // 변환된 값을 다시 input에 설정
      input.value = value;
    }

    function formatBirthdate(input) {
      let value = input.value.replace(/\D/g, '');

      if (value.length === 6) {
        value = '19' + value;
      }

      if (value.length === 8) {
        const year = value.substring(0, 4);
        const month = value.substring(4, 6);
        const day = value.substring(6, 8);
        input.value = `${year}-${month}-${day}`;
      }
    }

    function toggleSnsField() {
      const snsField = document.getElementById('snsField');
      snsField.style.display = snsField.style.display === 'none' ? 'block' : 'none';
    }

    function toggleReferralFields() {
      //  This function likely exists elsewhere in regist.js to handle other referral fields.  Leaving as is.
    }
  </script>
  <style>
    .terms {
      font-size: 12px;
      /* 글씨 작게 */
      font-weight: lighter;
      /* 글씨 가늘게 */
    }
  </style>
</head>

<body>
  <div class="container">
    <h2 style="text-align: center;">회원가입계약서</h2>
    <hr>
    <form id="regform">

      <input type="hidden" name="isssn" id="isssn" value="n">

      <div class="section name-contact">
        <div>
          <p>이름</p>
          <input type="text" name="userid" id="userid" maxlength="20" class="thisbox">
        </div>
        <div>
          <p>연락처</p>
          <input type="text" name="contact" id="contact" maxlength="20" class="thisbox" placeholder="000-0000-0000">
        </div>
        <div class="gender-group">
          <p>성별</p>
          <div class="radio-group">
            <label><input type="radio" name="gender" value="여자"> 여자</label>
            <label><input type="radio" name="gender" value="남자"> 남자</label>
          </div>
        </div>
        <div class="birthdate-group">
          <p>생년월일</p>
          <input type="text" name="userpw_re" id="userpw_re" maxlength="10" class="thisbox"
            oninput="formatBirthdate(this)" placeholder="예: 901010 또는 19901010">
        </div>
      </div>

      <div class="section" style="display: flex; gap: 20px;">
        <div style="flex: 1;">
          <p>주소</p>
          <div style="display: flex; gap: 10px;">
            <input type="text" name="address" id="sample6_address" class="thisbox" readonly>
            <input type="button" value="주소 검색" onclick="sample6_execDaumPostcode()" class="address-search-btn">
          </div>
        </div>
        <div style="flex: 1;">
          <p>회원권 선택</p>
          <select name="membership" id="membership" class="thisbox">
            <option value="New">New</option>
            <option value="Renew">Renew</option>
            <option value="Upgrade">Upgrade</option>
          </select>
        </div>
      </div>

      <div class="section" style="display: flex; gap: 20px;">
        <div style="flex: 0.5;">
          <p>운동복 대여</p>
          <input type="number" name="rental_months" id="rental_months" class="thisbox" min="1" placeholder="개월">
        </div>
        <div style="flex: 0.5;">
          <p>라커 대여</p>
          <input type="number" name="locker_months" id="locker_months" class="thisbox" min="0" placeholder="개월">
        </div>
        <div style="flex: 1;">
          <p>기간회비</p>
          <input type="text" name="period_fee" id="period_fee" class="thisbox" placeholder="금액 입력 (₩)" oninput="formatCurrency(this)">
        </div>
      </div>

      <div class="section" style="display: flex; gap: 20px;">
        <div style="flex: 1;">
          <p>운동목적</p>
          <label><input type="checkbox" name="goal" value="다이어트"> 다이어트</label>
          <label><input type="checkbox" name="goal" value="근육증가"> 근육증가</label>
          <label><input type="checkbox" name="goal" value="체형교정"> 체형교정</label>
          <label><input type="checkbox" name="goal" value="재활운동"> 재활운동</label>
          <div style="margin-top: 10px;">
            <input type="text" name="other" id="other" class="thisbox" placeholder="기타">
          </div>
          <p style="margin-top: 15px;">운동시간</p>
          <div style="display: flex; gap: 10px; align-items: center;">
            <label style="display: flex; align-items: center; gap: 5px;">
              <input type="checkbox" name="workout_time" value="오전">
              오전 <input type="time" class="time-input" name="morning_time">
            </label>
            <label style="display: flex; align-items: center; gap: 5px;">
              <input type="checkbox" name="workout_time" value="오후">
              오후 <input type="time" class="time-input" name="afternoon_time">
            </label>
          </div>
        </div>
        <div style="flex: 1;">
          <div style="display: flex; align-items: center;">
            <p style="margin-right: 20px;">결제 방법</p>
            <div>
              <label style="margin-right: 10px;"><input type="checkbox" name="payment" value="카드"> 카드</label>
              <label style="margin-right: 10px;"><input type="checkbox" name="payment" value="현금"> 현금</label>
              <label><input type="checkbox" name="payment" value="계좌이체"> 계좌이체</label>
            </div>
          </div>
          <input type="text" name="total_amount" id="total_amount" class="thisbox" style="margin-top: 10px;"
            placeholder="금액 입력 (₩)" oninput="formatCurrency(this)">
          <p style="margin-top: 15px;">회원권 시작일</p>
          <input type="date" name="membership_start_date" id="membership_start_date" class="thisbox">
        </div>
      </div>

      <div class="section">
        <p>가입경로</p>
        <div style="display: flex; align-items: center; gap: 15px; flex-wrap: nowrap;">
          <label style="font-size: 14px;"><input type="checkbox" name="referral" value="간판"> 간판</label>
          <label style="font-size: 14px;"><input type="checkbox" name="referral" value="전단지"> 전단지</label>
          <div style="display: flex; align-items: center; gap: 5px;">
            <label style="font-size: 14px;"><input type="checkbox" name="referral" value="SNS"> SNS</label>
            <input type="text" name="sns_detail" id="snsField" class="thisbox" style="width: 120px; height: 30px;" placeholder="SNS 채널명">
          </div>
          <div style="display: flex; align-items: center; gap: 5px;">
            <label style="font-size: 14px;"><input type="checkbox" name="referral" value="인터넷검색"> 인터넷검색</label>
            <input type="text" name="internet_detail" class="thisbox" style="width: 120px; height: 30px;" placeholder="검색 사이트명">
          </div>
          <div style="display: flex; align-items: center; gap: 5px;">
            <label style="font-size: 14px;"><input type="checkbox" name="referral" value="지인추천"> 지인추천</label>
            <input type="text" name="referral_name" class="thisbox" style="width: 100px; height: 30px;" placeholder="추천인 이름">
            <input type="text" name="referral_phone" class="thisbox" style="width: 120px; height: 30px;" placeholder="추천인 연락처">
          </div>
        </div>
      </div>

      <!-- 약관 내용 추가 -->
      <div class="section terms-section">
        <h3>약관 내용</h3>
        <p class="terms"><strong>1.회원권 휴회</strong> <br>
          6개월 1회, 12개월 2회 가능하고, 연기 신청서를 작성시 인정됩니다. 회당 최대 30일까지 휴회가 가능하고, 락카기간은 정지가 불가합니다.<br>군복무, 임신 등 센터가 인정하는 사유로 장기간
          이용할 수 없는 경우에는 센터에서 정한 양식을 작성하고 관계 증빙서류를 첨부 제출하여 휴회할 수 있습니다.<br>
          <strong>2.회원권 양도</strong><br>
          회원권은 타인에게 대여가 불가하고, 양도는 신규 회원에게만 가능합니다. 양도비 55,000원(부가세 포함)이 발생합니다.<br>서비스로 받은 기간 및 상품은 양도되지 않으며, 양도 받은 회원권은
          환불, 휴회, 재양도가 불가합니다.<br>
          <strong>3.회원권 자격 상실</strong> <br>
          본 센터는 다른 회원님의 안전과 배려를 위한 본 계약서의 등록 조건 및 규정, 지침을 위반한 회원님의 경우 회원권을 해지할 수 있습니다.<br>이 경우, 센터가 입은 손해나 손실에 대하여 위반
          회원님에게 청구할 권리가 있습니다.<br>
          <strong>4.추가 비용 및 락카 물품관리</strong> <br>
          유니폼, 개인락카 등 부대시설은 별도의 추가 비용으로 이용하실 수 있습니다. 별도의 추가 없이 무단으로 이용할 경우, 이용료 10배 벌금이 부과될 수 있습니다.<br>기간이 만료된 개인락카는 만료일
          기준으로 회수되며, 물품은 30일동안 보관 후 폐기처분됩니다.<br>
          <strong>5.회원권 규정 및 지침의 변경</strong> <br>
          본 센터는 필요한 경우 회원권 규정 및 지침을 수정할 수 있으며, 특정시설 및 영업시간을 변경하거나 임시로 휴업할 수 있습니다.<br>프로그램 강습 및 서비스를 회원에게 고지 후 변경, 폐지할 수
          있습니다.<br>
          <strong>6.면책 규정</strong> <br>
          센터는 어떤 경우에도 시설 내에서 분실 또는 도난 당한 물품에 대해서 책임지지 않으며, 회원님 개인 물품의 보관은 전적으로 개인 책임입니다.<br>본 센터가 시설 관리 또는 회원 질서유지 등과
          관련하여 책임 있는 경우를 제외하고, 시설을 이용하는 회원님 자신 또는 제 3자의 행위로 인한 신체적, 정신적 장애나 경제적 혹은 기타 손실에 대해 본 센터가 어떠한 책임도 지지 않는 것에
          동의합니다.<br>
          <strong>7.회원권 해지</strong> <br>
          해지는 전화 신청이 불가하며, 센터 절차에 따라 직접 방문 작성, 신청하셔야 합니다.<br>
          <strong>8.운동 중 상해 발생</strong> <br>
          트레이너 동반 없이 개인 운동 중 상해가 발생하게 되는 경우, 본 센터는 책임지지 않습니다.<br>
          <strong>9.지점이용</strong> <br>
          등록한 지점 외 다른 지점은 월 5회 이용 가능합니다.
        </p>
      </div>

      <div class="section terms-section" style="border-bottom: 1px solid #ccc; display: flex; gap: 20px;">
        <div style="flex: 1;">
          <p class="terms"><strong>24시 이용안내</strong><br>
            1. 야간 서비스는 만 19세 이상부터 이용 가능합니다.<br>
            2. 음주시 센터 이용과 센터 내 음주는 불가합니다.<br>
            3. 클럽 회원은 회원 등록이 안된 게스트와 함께 입장할 수 없습니다.<br>
            4. 24시간 CCTV가 작동중이며 시설 내의 모든 활동을 365일 기록합니다.<br>
            5. 타인의 출입을 위해 임의로 문을 여는 것은 금지됩니다.<br>
            6. 응급 처치 키트는 입구 근처 프론트 데스크 비치되어 있습니다.<br>
            7. 휴일 및 공휴일에는 운동복 및 수건이 지급되지 않을 수 있습니다.<br>
            8. 형법 제319조에 의거 무단출입 또는 타인의 무단출입을 도와줄 경우, 최대 500만원의 벌금에 처할 수 있습니다.</p>
        </div>
        <div style="flex: 1;">
          <p class="terms"><strong>환불안내</strong><br>
            1. 이용 개시일 전에는 위약금 10%가 공제됩니다.<br>
            2. 이용 개시일 후에는 위약금 10% + 소요기간 정상가격이 공제됩니다.<br>
            3. 가입시 서비스로 제공되는 기간, 시설, 레슨, 사은품 등은 환불 요청시 상품가치 에 해당하는 금액이 공제됩니다.<br>
            4. 가입비는 환불되지 않습니다.<br>
            5. 해지시 개인적인 사정에 의해 연기된 기간은 이용 기간에 포함됩니다.<br>
            6. 무료PT의 경우 일방적인 수업 취소시에도 금액이 공제됩니다.<br>
            7. 환불은 신청 후 영업일 기준 15일 이내에 처리 됩니다.</p>
        </div>
      </div>

      <div class="section signbox">
        <p>서명</p>
        <canvas id="jsCanvas" class="canvas thisbox"></canvas>
        <script src="./canvas.js"></script>
      </div>

      <p><button type="button" onclick="downloadAsImage()" class="submitBtn">가입완료</button></p>
    </form>
  </div>
</body>

</html>